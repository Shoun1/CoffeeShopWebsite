<!DOCTYPE html>
<html>
    <head>
        <title>AJAX Example</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>
    <body>
        <p id="output">Default text</p>
        <!--<input id="user_number">--> 
        <button onclick="update_user()">Submit</button>
        <script type="text/javascript">
            function update_user(){
                //user_number = document.getElementById("user_number").value;
                //alert("number received");
                //create an HTTP request object
                
                //alert("request sent");
                httpRequest.onreadystatechange = function(){
                    alert("action");
                    if(this.readyState == 4 && this.status == 200){
                        console.log("Ready State:",httpRequest.readyState,"Status:",httpRequest.status);
                            //alert("status 200");
                            try{

                                const user_data = JSON.parse(this.responseText);
                                //alert("HTTP Response received");
                                document.getElementById("output").innerHTML = user_data.data.first_name;
                            } catch(err){
                                console.error("Error parsing JSON or updating DOM:", err.message);
                                alert("Something went wrong while processing the server response.");
                            }
                        }
                       else{
                            console.warn("Server returned status:", this.status);
                            alert("Server returned status: " + this.status);
                        }
                    }
            };
            let user_number = 2;
            httpRequest = new XMLHttpRequest();
            httpRequest.open("GET","https://reqres.in/api/users/" + user_number);
            httpRequest.send();
        </script>
    </body>
</html>